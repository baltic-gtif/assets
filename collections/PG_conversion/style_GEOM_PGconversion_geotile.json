{
  "legend": [
    {
      "title": "PG converted parcels from 2024 to 2025:",
      "range": ["#f47336", "#f1c232", "#8b8c89", "#ff0000"],
      "domain": ["Converted area", "Partially Converted", "Compelexe Change", "Area no longer declared"],
      "scaleType": "categorical",
      "markType": "rect",
      "boundTo": { "key": "metric", "value": "source_file" }
    },
    {
      "title": "Conversion of Permanent Grassland parcel (2024) into another category of parcel (2025):",
      "range": ["#351c75", "#cbdf90", "#1c450b", "#0b5394", "#5b5b5b"],
      "domain": ["PG to Arable Land ", "PG to Temporary Grassland", "PG to Forest", "PG to Other category", "PG to No Category"],
      "scaleType": "categorical",
      "markType": "rect",
      "boundTo": { "key": "metric", "value": "classification_year_x1" }
    }
  ],

  "stroke-width": 1.2,
  "stroke-color": "#f44336",

  "jsonform": {
    "type": "object",
    "title": "Data configuration",
    "properties": {
      "metric": {
        "title": "Metric",
        "type": "string",
        "enum": [
            "classification_year_x1", 
            "source_file"],
        "options": {
          "enum_titles": [
              "New Land Use - 2025 (Thematic)", 
              "PG changes - 2025 (Geometric)"]
        },
        "default": "classification_year_x1"
      }
    }
  },

  "fill-color": [
    "case",

    ["==", ["var", "metric"], "source_file"],
    [
      "case",
      ["!", ["get", "source_file"]], [0, 0, 0, 0],
      ["==", ["get", "source_file"], "one_to_one"], "#f47336",
      ["==", ["get", "source_file"], "new"], "#f47336",
      ["==", ["get", "source_file"], "disappeared"], "#ff0000",
      ["==", ["get", "source_file"], "only_merges"], "#f47336",
      ["==", ["get", "source_file"], "only_splits"], "#f1c232",
      ["==", ["get", "source_file"], "other_changes"], "#8b8c89",
      ["==", ["get", "source_file"], "union_other_changes_converted"], "#8b8c89",
      [0, 0, 0, 1]
    ],

    ["==", ["var", "metric"], "classification_year_x1"],
    [
      "case",
      ["!", ["get", "classification_year_x1"]], [0, 0, 0, 0],
      ["==", ["get", "classification_year_x1"], "AL"], "#351c75",
      ["==", ["get", "classification_year_x1"], "TG"], "#cbdf90", 
      ["==", ["get", "classification_year_x1"], "F"], "#1c450b",
      ["==", ["get", "classification_year_x1"], "nan"], "#0b5394",
      ["==", ["get", "classification_year_x1"], "No category"], "#5b5b5b",

      "#2986cc"
    ],
    [215, 235, 215, 0.25]
  ],

  "tooltip": [
    { "id": "id_year_x1", "title": "Internal ID - 2025" , "decimals": 0},
    { "id": "id_year_x", "title": "Internal ID - 2024" , "decimals": 0},
    { "id": "psl_kodas_year_x", "title": "Type - 2024" },
    { "id": "psl_kodas_year_x1", "title": "Type - 2025" },
    { "id": "classification_year_x", "title": "Category - 2024" },
    { "id": "classification_year_x1", "title": "Category - 2025" },
    { "id": "source_file", "title": "Evolution - Geometric" },
    { "id": "conversion_type", "title": "Evolution - Thematic" },
    { "id": "area_ha_year_x", "title": "Parcel area (ha)" , "decimals": 1}
  ],

  "variables": {
    "metric": "classification_year_x1"
  }
}
